<div class="main">
  <div class="card-header">
    Assessment Form
  </div>
  <div class=" row filter">
    <ngx-dhis2-selection-filters
      (filterUpdate)="onFilterUpdateAction($event)"
      [dataSelections]="dataSelections"
      [selectionFilterConfig]="selectionFilterConfig"
      (update)="onFilterUpdateAction($event)"
      class="filter"
    >
    </ngx-dhis2-selection-filters>
  </div>
  <div>
    <div>
      <!-- This is the beginning of the main form -->

      <div class="form">
        <div>
          <form name="assessmentForm" *ngIf="showForm">
            <table class="table table-bordered table-hover table-sm">
              <thead class="card-header">
                <tr class="table-active">
                  <th scope="col" class="sno">S/No</th>
                  <th scope="col" class="indicator">Indicator</th>
                  <th scope="col" class="possibleMaxValue">
                    Possible Maximum Value
                  </th>
                  <th scope="col">Obtained Points</th>
                  <th scope="col" class="percentage">%</th>
                  <th scope="col">Observations</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="
                    let indicator of assessmentIndicators$ | async;
                    let sno = index
                  "
                >
                  <th scope="row" class="sno">{{ sno + 1 }}</th>
                  <td class="indicator">{{ indicator.indicator }}</td>
                  <td>
                    <input value="{{ indicator.possibleMaxValue }}" disabled />
                  </td>
                  <td>
                    <input
                      type="number"
                      (blur)="onInputBlur(sno)"
                      (keypress)="onInputChange(sno)"
                      [(ngModel)]="obtainedValue[sno]"
                      [ngModelOptions]="{ standalone: true }"
                      max="{{ indicator.possibleMaxValue }}"
                    />
                    <!-- <select name="selection" (blur)="onSelectBlur(sno)">
                      <option (click)="onOptionSelect(sno, 1)">
                        Applicable
                      </option>
                      <option (click)="onOptionSelect(sno, 0)">
                        Not Applicable
                      </option>
                    </select> -->
                    <mat-form-field class="mat-form-field">
                      <mat-label>Selection Applet</mat-label>
                      <mat-select (blur)="onSelectBlur(sno)">
                        <mat-option
                          [value]="1"
                          (click)="onOptionSelect(sno, 1)"
                        >
                          Applicable
                        </mat-option>
                        <mat-option
                          [value]="2"
                          (click)="onOptionSelect(sno, 0)"
                        >
                          Not Applicable
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>
                  <td>
                    <input
                      disabled
                      [(ngModel)]="percentage[sno]"
                      [ngModelOptions]="{ standalone: true }"
                    />
                  </td>
                  <td><input class="observation" /></td>
                </tr>
              </tbody>
            </table>
            <button class="btn btn-group btn-primary" type="submit">
              Complete
            </button>
            <button class="btn btn-group btn-primary">Incomplete</button>
            <button class="btn btn-group btn-primary">Run Validation</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
